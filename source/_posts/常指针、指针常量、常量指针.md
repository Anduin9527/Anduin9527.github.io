---
title: 指针常量与常量指针
katex: true
tags:
  - C
  - 语法
  - C++
abbrlink: 2c104621
date: 2021-01-25 15:02:46
---

### 前言

最新在重新学 *cpp*，水篇博客也顺便练练 $markdown$ 

<!--more-->

## 基本概念

**指针**（pointer）的两个属性

+ 指针变量本身（pointer variable）
+ 指向的数据（data）

那么，基于以上两个属性，可以将指针分为四类：

|   指针   | 被指数据 |        名称        |
| :------: | :------: | :----------------: |
| variable | variable |      指针变量      |
| variable | constant |      常量指针      |
| constant | variable |      指针常量      |
| constant | constant | 指向常量的指针常量 |

## 具体介绍

### 常量指针、常指针（Pointer to Constant）

**特征**：**data** 不能通过 **间接引用** 改变

```c++
const int data = 1;
const int* p = &data;

*p = 2;//Error! 表达式必须为可修改的左值
p=&another_data;//OK!

char* s1 = "Hello";//Error! "const char *" 类型的值不能用于初始化 "char *" 类型的实体	
const char* s2 = "Hello";//OK!
```

+ 显然，"Hello" 作为字符串常量，需要用常指针才能指向其首地址。
+ 常指针可以指向变量，但间接引用还是不可以嚄。

### 指针常量 （Pointer Constant）

**特征**：指针本身是个常量不能改变

```c++
int x, y;
int* const p = &x;
	
p = &y;//Error! 表达式必须是可修改的左值
p = 10;//OK!

int a[]={1,2,3,4};
a++;//Error! 表达式必须是可修改的左值
```

+ 数组名等效为一种指针常量，既然是常量自然不能作为左值进行运算。

### 常指针常量

```c++
const int* const p
```

## 使用总结

+ *（指针）与 const（常量）在前先读
+ const 在谁前，谁不变

```c++
例子：
int const * p //常量指针
const int * p //常量指针
```

+ auto 大法好（误）