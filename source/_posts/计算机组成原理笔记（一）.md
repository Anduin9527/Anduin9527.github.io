---
title: 计算机组成原理笔记（一）
tags:
  - 笔记
  - 硬件
category: 计算机组成原理
katex: true
abbrlink: 5bb1b670
date: 2022-06-25 17:36:13
---



## 前言

暑假正式开始，开（huan）坑（zhai）计组。笔记会同步更新于[我的Github笔记仓库](https://github.com/Anduin9527/CS-Professional-Notes-of-NJUPT)

<img src="https://imgbed-1304793179.cos.ap-nanjing.myqcloud.com/typora/20220625173242.webp" alt="img" style="zoom:67%;" />

<!--more-->

## 计算机系统简介

### 计算机软硬件概念

计算机系统

1. 硬件：计算机的实体：如主机、外设
2. 软件：具有各类特殊功能的信息（程序）组成
   1. 系统软件：用来管理整个计算机系统
      1. 语言处理程序（编译、链接）
      2. 操作系统
      3. 服务性程序
      4. 数据库管理系统
      5. 网络软件
   2. 应用软件：按任务需要编写的程序

### 计算机系统的层次结构

1. 物理结构抽象

   ![image-20220625092855877](https://imgbed-1304793179.cos.ap-nanjing.myqcloud.com/typora/20220625092903.png)

   自底向上地来看：

   1. Physics 物理抽象，电子设备依靠电子的移动进行工作。可以使用 量子 机制，和麦克斯韦方程进行描述。
   2. Devices 电子元件，利用电子在不同物质中的移动特征来构建不同的电子元件，其具有不同的电压电流特征用以描述。
   3. Analog Circuits 模拟电路，利用基本的电子元件构建放大器，滤波器等部件。
   4. Digital Circuits 数字电路，利用模拟电路层进一步构建与非门等。
   5. Logic 逻辑层，利用数字电路进行加法器和存储器的实现。
   6. Microarchitecture 微体系(架构)结构层，具有执行单元和控制单元

2. 程序员角度

   ![image-20220625094958199](https://imgbed-1304793179.cos.ap-nanjing.myqcloud.com/typora/20220625094958.png)

## 计算机的基本组成

### 冯·诺依曼计算机的特点

1. 计算机由五大部件（运算器、控制器、存储器、输入设备和输出设备）组成
2. 指令和数据以同等地位**存于存储器**，可按地址寻访
3. 指令和数据用二进制表示
4. 指令由操作码和地址码组成
5. 存储程序（核心特征）
6. 以运算器为中心

### 冯·诺依曼计算机的硬件图

<img src="https://imgbed-1304793179.cos.ap-nanjing.myqcloud.com/typora/20220625101051.png" alt="image-20220625101051177" style="zoom:80%;" />

+ 实线表示数据通路
+ 虚线表示控制和状态反馈
+ 运算器：核心，算术运算与逻辑运算
+ 存储器：存放数据和程序
+ 控制器：指挥控制程序的运行
+ 输入设备：将信息转化为机器能识别的形式
+ 输出设备：将结果转化为人能识别的形式

### 冯·诺依曼计算机的结构改进

以存储器为中心的计算机硬件框图

![image-20220625101628906](https://imgbed-1304793179.cos.ap-nanjing.myqcloud.com/typora/20220625101628.png)

其中，运算器（ALU）和控制器（CU）可以组成 CPU 。存储器可以进一步分为主存和辅存。主存和CPU可以进一步构成主机。输入设备和输出设备统称为I/O设备，主机和I/O设备统称为硬件。则给出

<img src="https://imgbed-1304793179.cos.ap-nanjing.myqcloud.com/typora/20220625103446.png" alt="image-20220625103446906" style="zoom:80%;" />

### 系统复杂性管理的方法

1. 层次化（Hierachy）：将被设计的系统划分为多个模块或子模块
2. 模块化（Modularity）：有明确定义（well-defined）的功能和接口
3. 规则性（regularity）：模块符合某些通用标准，使其更容易被重用

### 计算机的工作步骤

1. 建立数学模型
2. 确定计算方法
3. 编写解题程序

给例子：计算$a x^{2}+b x+c=(a x+b) x+c$

1. 从问题来看需要**加法指令**和**乘法指令**

2. 还需要取出数字并放置到累加器中的**取数指令**，和读取结果并放置到存储器中的**读取指令**

3. 最后是显示或者打印的**打印指令**，以及停机指令

4. 计算

   	取 x 至运算器中
   	乘以 a 在运算器中
   	加 b 在运算器中
   	乘以 x 在运算器中
   	加 c 在运算器中

### 指令格式

都使用16位长度的指令由6位操作码和8位地址码构成，[] 表示在寄存器中保存的内容

1. 取数指令

   取数 a，[a] –> ACC

   000001 0000001000，前六位表示取数指令，后十位表示地址8

2. 存数指令

   存数 b，[ACC] –> b

3. 加法指令

   加数 c，[ACC] + [c] –> [ACC]

4. 乘法指令

   乘数 d，[ACC] * [d] –> [ACC]

5. 打印指令

   $\sigma$ ，[$\sigma$] –> 打印机

6. 停机指令

<img src="https://imgbed-1304793179.cos.ap-nanjing.myqcloud.com/typora/20220625110202.png" alt="image-20220625110202631" style="zoom:67%;" />



### 存储器的基本组成

上面我们知道，**指令**和**数据**都保存在存储器当中。**存储器**的主要部分是**存储体，MAR，MDR**

<img src="https://imgbed-1304793179.cos.ap-nanjing.myqcloud.com/typora/20220625161002.png" alt="image-20220625161002215" style="zoom:67%;" />

+ **存储体**又有若干**存储单元**构成，**存储单元**又由若干**存储元件**（0/1）构成。 

+ 存储单元：存放一串二进制代码，即**存储字**
+ 存储字长：存储字的长度（位数）
+ 存储单元**按照地址寻址**
+ MAR：存储器**地址寄存器**，**保存了存储单元的地址**，MAR的位数反映了存储单元的个数。**即存储单元个数是$2^{n_{MAR}}$**。
+ MDR：存储器**数据寄存器**，MDR的位数表示该存储器的**存储字长**，即**存储字长是**$n_{MDR}$
+ MAR 就像存储器的入口，其接受某个地址作为寻找请求。存储器找到后将其地址中的**内容**交给存储器出口MDR

### 运算器的基本组成

<img src="https://imgbed-1304793179.cos.ap-nanjing.myqcloud.com/typora/20220625162012.png" alt="image-20220625162012087" style="zoom:80%;" />

ALU：Arithmetic Logic Unit，**算术逻辑运算单元**，运算器中完成算术逻辑运算的逻辑部件

ACC：Accumulator，**累加器**，运算器中运算前存放操作数、运算后存放运算结果的寄存器

MQ：Multiplier-Quotient Register，**乘商寄存器**，乘法运算时存放乘数、除法时存放商的寄存器

X：此字母没有专指的缩写含义，可以用作任一部件名，在此表示操作数寄存器，即运算器中工作寄存器之一，用来**存放操作数**

例：加法操作过程，设加法指令操作码为000001，加数的地址为M

1. 初态：ACC中已经存放好了被加数
2. [M] –> X
3. [ACC] + [X] –> ACC

例2：减法操作过程，设减法指令操作码为000010，减数的地址为M

1. 初态：ACC中已经存放好了被减数
1. [M] –> X
1. [ACC] - [X] –> ACC

例3：乘法操作过程，设乘法指令操作码为000011，乘数的地址为M

1. 初态：ACC中已经存放好了被乘数
2. [M] –> MQ
3. [ACC] –> X
4. 0 –> ACC
5. [ACC] \* [X] –> ACC//MQ

例4：除法操作过程，设触发指令操作码为000111，除数的地址为M

1. 初态：ACC中已经存放好了被除数
2. [M] –> X
3. [ACC] / [X] –> MQ，余数在ACC中

### 控制器的基本组成

控制器由PC、IR与CU组成

控制器用以解释指令并保证指令按照正确的次序执行，下面来看完成一条指令需要三个大步骤：

1. 取指令，**PC（程序计数器）**存放当前欲执行指令的地址， 具有计数功能：（PC）+ 1 –> PC
2. 分析指令，**IR（指令寄存器）**存放当前欲执行的指令
3. 执行指令，**CU**

例：完成一条**取数指令**的过程

<img src="https://imgbed-1304793179.cos.ap-nanjing.myqcloud.com/typora/20220625165601.png" alt="image-20220625165601107" style="zoom:80%;" />

1. 取指令
   1. PC 把指令的地址给MAR 
   2. MAR 在控制器的控制之下，根据地址寻找指定的存储单元
   3. 存储体把指定的存储单元中的指令取出送入 MDR
   4. MDR 取出的指令送入 IR
2. 分析指令
   1. IR 中的操作码部分送给 CU，由 CU 根据指令开始执行操作
3. 执行指令
   1. IR 中的地址码部分送给 MAR
   2. MAR 在控制器的控制之下，根据地址寻找指定的存储单元
   3. 存储体把指定的存储单元中的数据取出送入 MDR
   4. MDR 取出的数据送入ACC，取数完毕

### 总结

1. 将程序通过输入设备送至计算机
2. 程序首地址 –> PC
3. 启动程序运行
4. 取指令PC→MAR→M→MDR→IR，(PC)+1→PC
5. 分析指令OP(IR)→CU
6. 执行指令AD(IR)→MAR→M→MDR→ACC
7. ……
8. 打印结果
9. 停机

